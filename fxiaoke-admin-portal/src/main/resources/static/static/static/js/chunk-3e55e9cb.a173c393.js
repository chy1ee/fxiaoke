(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e55e9cb"],{"64d8":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"chylee-container"},[r("div",{staticClass:"page-content"},[r("el-form",{attrs:{inline:!0,model:t.jobForm}},[r("el-form-item",{attrs:{label:"任务名称"}},[r("el-input",{attrs:{placeholder:"任务名称"},model:{value:t.jobForm.name,callback:function(e){t.$set(t.jobForm,"name",e)},expression:"jobForm.name"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.submitJobForm}},[t._v("查询")]),t._v(" "),r("el-button",{on:{click:t.resetJobForm}},[t._v("重置")])],1)],1),t._v(" "),r("div",{staticClass:"action-bar"},[r("el-button",{attrs:{type:"primary"},on:{click:t.createJobHandler}},[t._v("新增")])],1),t._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-class-name":"chylee-header",data:t.jobData}},[r("el-table-column",{attrs:{prop:"id",label:"ID","header-align":"center",align:"right",width:"40"}}),t._v(" "),r("el-table-column",{attrs:{prop:"jobName",label:"名称","header-align":"center",width:"220"}}),t._v(" "),r("el-table-column",{attrs:{prop:"jobGroup",label:"分组","header-align":"center",width:"80"}}),t._v(" "),r("el-table-column",{attrs:{prop:"bean",label:"执行对象","header-align":"center",width:"140"}}),t._v(" "),r("el-table-column",{attrs:{prop:"param",label:"参数","header-align":"center",width:"180"}}),t._v(" "),r("el-table-column",{attrs:{prop:"childIds",label:"子任务","header-align":"center",width:"80"}}),t._v(" "),r("el-table-column",{attrs:{label:"状态",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-switch",{attrs:{"active-text":"运行","active-value":1,"inactive-text":"暂停","inactive-value":0},on:{change:function(r){return t.statusChangeHandler(e.row)}},model:{value:e.row.status,callback:function(r){t.$set(e.row,"status",r)},expression:"scope.row.status"}})]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"操作","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.trggerJobHandler(e.$index,e.row)}}},[t._v("执行一次")]),t._v(" "),r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.deleteJobHandler(e.$index,e.row)}}},[t._v("删除")]),t._v(" "),r("el-button",{attrs:{type:"text"}},[t._v("日志")])]}}])})],1),t._v(" "),r("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":10,total:t.total,"current-page":t.page},on:{"current-change":t.handlePageChange}})],1),t._v(" "),t.editJobVisible?r("edit-job",{ref:"editJob",on:{refreshDataList:t.refreshDataList}}):t._e()],1)},o=[],n=r("c879"),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{title:-1==t.index?"新增执行器":"编辑执行器","close-on-click-modal":!1,visible:t.visible,width:"30%"},on:{"update:visible":function(e){t.visible=e}}},[r("el-form",{ref:"jobForm",attrs:{model:t.jobForm,rules:t.jobRule,"label-width":"80px"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.jobForm.id,expression:"jobForm.id"}],attrs:{name:"id",type:"hidden"},domProps:{value:t.jobForm.id},on:{input:function(e){e.target.composing||t.$set(t.jobForm,"id",e.target.value)}}}),t._v(" "),r("el-form-item",{attrs:{label:"分组",prop:"jobGroup"}},[r("el-select",{attrs:{placeholder:"请选择分组"},model:{value:t.jobForm.jobGroup,callback:function(e){t.$set(t.jobForm,"jobGroup",e)},expression:"jobForm.jobGroup"}},t._l(t.groups,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"名称",prop:"jobName"}},[r("el-input",{attrs:{placeholder:"名称"},model:{value:t.jobForm.jobName,callback:function(e){t.$set(t.jobForm,"jobName",e)},expression:"jobForm.jobName"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"执行器",prop:"bean"}},[r("el-input",{attrs:{placeholder:"执行器"},model:{value:t.jobForm.bean,callback:function(e){t.$set(t.jobForm,"bean",e)},expression:"jobForm.bean"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"参数",prop:"params"}},[r("el-input",{attrs:{placeholder:"参数"},model:{value:t.jobForm.params,callback:function(e){t.$set(t.jobForm,"params",e)},expression:"jobForm.params"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"子任务",prop:"childIds"}},[r("el-input",{attrs:{placeholder:"多个子任务ID用逗号分隔"},model:{value:t.jobForm.params,callback:function(e){t.$set(t.jobForm,"params",e)},expression:"jobForm.params"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"状态"}},[r("el-radio-group",{model:{value:t.jobForm.status,callback:function(e){t.$set(t.jobForm,"status",e)},expression:"jobForm.status"}},[r("el-radio",{attrs:{label:1}},[t._v("正常")]),t._v(" "),r("el-radio",{attrs:{label:2}},[t._v("暂停")])],1)],1)],1),t._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitEdit()}}},[t._v("确 定")])],1)],1)},l=[],s={data:function(){return{index:-1,visible:!1,groups:[],jobForm:{id:0,jobGroup:"",jobName:"",bean:"",params:"",childIds:"",status:1},jobRule:{jobGroup:[{required:!0,message:"请选择分组",trigger:"blur"}],jobName:[{required:!0,message:"不能为空",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 100 个字符",trigger:"blur"}],bean:[{required:!0,message:"不能为空",trigger:"blur"}]}}},created:function(){var t=this;Object(n["g"])({status:1}).then((function(e){t.groups=e.list}))},methods:{init:function(){var t=this;this.visible=!0,this.$nextTick((function(){t.$refs["jobForm"].resetFields()}))},submitEdit:function(){var t=this;this.$refs["jobForm"].validate((function(e){e&&Object(n["k"])(t.jobForm).then((function(e){console.log(e),t.visible=!1,t.$emit("refreshDataList",e.data)}))}))}}},u=s,c=r("623f"),b=Object(c["a"])(u,i,l,!1,null,null,null),m=b.exports,d={name:"quartz_job",components:{EditJob:m},data:function(){return{editJobVisible:!1,jobForm:{name:""},total:0,page:1,jobData:[]}},created:function(){this.loadPage()},methods:{loadPage:function(t){var e=this;Object(n["h"])(t).then((function(t){console.log(t),e.total=t.total,e.page=t.page,e.jobData=t.list}))},createJobHandler:function(){var t=this;this.editJobVisible=!0,this.$nextTick((function(){t.$refs.editJob.init()}))},handlePageChange:function(t){this.loadPage({page:t})},submitJobForm:function(){console.log("submit!")},resetJobForm:function(){},refreshDataList:function(t){null==this.jobData&&(this.jobData=[]),this.jobData.push(t)},statusChangeHandler:function(t){Object(n["b"])({id:t.id,status:t.status}).then((function(e){e.success||(t.status=1==t.status?0:1)}))},deleteJobHandler:function(t,e){var r=this;this.$confirm("此操作将永久删除执行器, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["e"])({id:e.id}).then((function(e){r.jobData.splice(t,1)}))})).catch((function(){r.$message({type:"info",message:"已取消删除"})}))},trggerJobHandler:function(t,e){var r=this;this.$confirm("你确实要触发此执行器?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["m"])({id:e.id})})).catch((function(){r.$message({type:"info",message:"已取消执行"})}))}}},p=d,f=(r("9346"),Object(c["a"])(p,a,o,!1,null,null,null));e["default"]=f.exports},"72fa":function(t,e,r){},9346:function(t,e,r){"use strict";var a=r("72fa"),o=r.n(a);o.a},c879:function(t,e,r){"use strict";r.d(e,"h",(function(){return o})),r.d(e,"k",(function(){return n})),r.d(e,"b",(function(){return i})),r.d(e,"e",(function(){return l})),r.d(e,"m",(function(){return s})),r.d(e,"i",(function(){return u})),r.d(e,"c",(function(){return c})),r.d(e,"l",(function(){return b})),r.d(e,"f",(function(){return m})),r.d(e,"g",(function(){return d})),r.d(e,"d",(function(){return p})),r.d(e,"a",(function(){return f})),r.d(e,"j",(function(){return h}));var a=r("b775");function o(t){return Object(a["a"])({url:"/quartz/job",method:"get",params:t})}function n(t){return Object(a["a"])({url:"/quartz/job",method:"post",params:t})}function i(t){return Object(a["a"])({url:"/quartz/job/status",method:"post",params:t})}function l(t){return Object(a["a"])({url:"/quartz/job/delete",method:"post",params:t})}function s(t){return Object(a["a"])({url:"/quartz/job/trigger",method:"post",params:t})}function u(t){return Object(a["a"])({url:"/quartz/trigger",method:"get",params:t})}function c(t){return Object(a["a"])({url:"/quartz/trigger/status",method:"post",params:t})}function b(t){return Object(a["a"])({url:"/quartz/trigger",method:"post",params:t})}function m(t){return Object(a["a"])({url:"/quartz/trigger/delete",method:"post",params:t})}function d(t){return Object(a["a"])({url:"/quartz/group",method:"get",params:t})}function p(t){return Object(a["a"])({url:"/quartz/group",method:"delete",params:t})}function f(t){return Object(a["a"])({url:"/quartz/group",method:"post",params:t})}function h(t){return Object(a["a"])({url:"/quartz/log",method:"get",params:t})}}}]);