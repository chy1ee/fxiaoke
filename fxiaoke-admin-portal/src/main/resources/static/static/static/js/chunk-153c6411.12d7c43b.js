(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-153c6411"],{"3c8b":function(t,e,r){},"611e":function(t,e,r){"use strict";var i=r("3c8b"),n=r.n(i);n.a},"985a":function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"chylee-container"},[r("div",{staticClass:"page-content"},[r("el-form",{attrs:{inline:!0,model:t.triggerForm}},[r("el-form-item",{attrs:{label:"任务名称"}},[r("el-input",{attrs:{placeholder:"任务名称"},model:{value:t.triggerForm.name,callback:function(e){t.$set(t.triggerForm,"name",e)},expression:"triggerForm.name"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")]),t._v(" "),r("el-button",{on:{click:t.onSubmit}},[t._v("重置")])],1)],1),t._v(" "),r("div",{staticClass:"action-bar"},[r("el-button",{attrs:{type:"primary"},on:{click:t.createTriggerHandler}},[t._v("新增")])],1),t._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-class-name":"chylee-header",data:t.triggerData}},[r("el-table-column",{attrs:{prop:"triggerName",label:"名称","header-align":"center",width:"140"}}),t._v(" "),r("el-table-column",{attrs:{prop:"triggerGroup",label:"分组","header-align":"center",width:"100"}}),t._v(" "),r("el-table-column",{attrs:{prop:"cronExpression",label:"Cron表达式","header-align":"center",width:"220"}}),t._v(" "),r("el-table-column",{attrs:{prop:"timeInterval",label:"间隔（秒）","header-align":"center",align:"right",width:"80"}}),t._v(" "),r("el-table-column",{attrs:{prop:"jobName",label:"执行器","header-align":"center",width:"180"}}),t._v(" "),r("el-table-column",{attrs:{label:"状态",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-switch",{attrs:{"active-text":"运行","active-value":1,"inactive-text":"暂停","inactive-value":0},on:{change:function(r){return t.statusChangeHandler(e.row)}},model:{value:e.row.status,callback:function(r){t.$set(e.row,"status",r)},expression:"scope.row.status"}})]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"操作","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.editTriggerHandler(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.deleteTriggerHandler(e.$index,e.row)}}},[t._v("删除")]),t._v(" "),r("el-button",{attrs:{type:"text"}},[t._v("日志")])]}}])})],1),t._v(" "),r("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":10,total:t.total,"current-page":t.page},on:{"current-change":t.handlePageChange}})],1),t._v(" "),t.editTriggerVisible?r("trigger-edit",{ref:"editTrigger",on:{refreshDataList:t.refreshDataList}}):t._e()],1)},n=[],a=r("c879"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{title:-1==t.index?"新增触发器":"编辑触发器","close-on-click-modal":!1,visible:t.visible,width:"30%"},on:{"update:visible":function(e){t.visible=e}}},[r("el-form",{ref:"triggerForm",attrs:{model:t.triggerForm,rules:t.triggerRule,"label-width":"80px"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.triggerForm.id,expression:"triggerForm.id"}],attrs:{name:"id",type:"hidden"},domProps:{value:t.triggerForm.id},on:{input:function(e){e.target.composing||t.$set(t.triggerForm,"id",e.target.value)}}}),t._v(" "),r("el-form-item",{attrs:{label:"名称",prop:"triggerName"}},[r("el-input",{model:{value:t.triggerForm.triggerName,callback:function(e){t.$set(t.triggerForm,"triggerName",e)},expression:"triggerForm.triggerName"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"Cron",prop:"cronExpression"}},[r("el-input",{model:{value:t.triggerForm.cronExpression,callback:function(e){t.$set(t.triggerForm,"cronExpression",e)},expression:"triggerForm.cronExpression"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"间隔",prop:"timeInterval"}},[r("el-input",{model:{value:t.triggerForm.timeInterval,callback:function(e){t.$set(t.triggerForm,"timeInterval",e)},expression:"triggerForm.timeInterval"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"执行器",prop:"jobId"}},[r("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":t.listJobByName},on:{change:t.jobChange},model:{value:t.triggerForm.jobId,callback:function(e){t.$set(t.triggerForm,"jobId",e)},expression:"triggerForm.jobId"}},t._l(t.jobs,(function(t){return r("el-option",{key:t.id,attrs:{label:t.jobName,value:t.id}})})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"分组",prop:"triggerGroup"}},[r("el-input",{attrs:{readonly:!0},model:{value:t.triggerForm.triggerGroup,callback:function(e){t.$set(t.triggerForm,"triggerGroup",e)},expression:"triggerForm.triggerGroup"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"状态"}},[r("el-radio-group",{model:{value:t.triggerForm.status,callback:function(e){t.$set(t.triggerForm,"status",e)},expression:"triggerForm.status"}},[r("el-radio",{attrs:{label:1}},[t._v("正常")]),t._v(" "),r("el-radio",{attrs:{label:0}},[t._v("暂停")])],1)],1)],1),t._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitEdit()}}},[t._v("确 定")])],1)],1)},l=[],s=(r("e697"),{data:function(){var t=this,e=function(e,r,i){null!=t.triggerForm.cronExpression&&""!=t.triggerForm.cronExpression||null!=t.triggerForm.timeInterval&&""!=t.triggerForm.timeInterval?i():i(new Error("Cron和间隔不能同时为空"))};return{index:-1,visible:!1,jobs:[],triggerForm:{id:0,triggerName:"",cronExpression:"",timeInterval:"",jobId:"",jobName:"",triggerGroup:"",status:1},triggerRule:{triggerName:[{required:!0,message:"不能为空",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}],jobId:[{required:!0,message:"不能为空",trigger:"blur"}],timeInterval:[{validator:e,trigger:"blur"}],cronExpression:[{validator:e,trigger:"blur"}]}}},created:function(){},methods:{init:function(t,e){var r=this;this.index=t,this.visible=!0,this.$nextTick((function(){r.$refs["triggerForm"].resetFields(),t>-1&&(r.triggerForm.id=e.id,r.triggerForm.triggerName=e.triggerName,r.triggerForm.cronExpression=e.cronExpression,r.triggerForm.timeInterval=e.timeInterval,r.triggerForm.jobId=e.jobId,r.triggerForm.jobName=e.jobName,r.triggerForm.triggerGroup=e.triggerGroup,r.triggerForm.status=e.status,r.jobs=[{id:e.jobId,jobName:e.jobName,jobGroup:e.jobGroup}])}))},submitEdit:function(){var t=this;this.$refs["triggerForm"].validate((function(e){e&&Object(a["l"])(t.triggerForm).then((function(e){t.visible=!1,t.$emit("refreshDataList",{index:t.index,data:t.triggerForm})}))}))},listJobByName:function(t){var e=this,r=t.trim();r.length>=1&&Object(a["h"])({name:r}).then((function(t){e.jobs=t.list}))},jobChange:function(t){var e=this.jobs.find((function(e){return e.id===t}));this.triggerForm.triggerGroup=e.jobGroup,this.triggerForm.jobName=e.jobName}}}),g=s,u=r("623f"),c=Object(u["a"])(g,o,l,!1,null,null,null),m=c.exports,d={name:"trigger",components:{TriggerEdit:m},data:function(){return{editTriggerVisible:!1,triggerForm:{name:""},total:0,page:1,triggerData:[]}},created:function(){var t=this;Object(a["i"])().then((function(e){t.total=e.total,t.page=e.page,t.triggerData=e.list}))},methods:{handlePageChange:function(){},onSubmit:function(){console.log("submit!")},createTriggerHandler:function(){var t=this;this.editTriggerVisible=!0,this.$nextTick((function(){t.$refs.editTrigger.init(-1)}))},editTriggerHandler:function(t,e){var r=this;this.editTriggerVisible=!0,this.$nextTick((function(){r.$refs.editTrigger.init(t,e)}))},deleteTriggerHandler:function(t,e){var r=this;this.$confirm("此操作将永久删除触发器, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["f"])({id:e.id}).then((function(e){r.triggerData.splice(t,1)}))})).catch((function(){r.$message({type:"info",message:"已取消删除"})}))},statusChangeHandler:function(t){Object(a["c"])({id:t.id,status:t.status}).then((function(e){e.success||(t.status=1==t.status?0:1)}))},refreshDataList:function(t){var e={id:t.data.id,triggerName:t.data.triggerName,cronExpression:t.data.cronExpression,timeInterval:t.data.timeInterval,jobId:t.data.jobId,jobName:t.data.jobName,triggerGroup:t.data.triggerGroup,status:t.data.status,index:t.index};t.index>-1?this.$set(this.triggerData,t.index,e):(null==this.triggerData&&(this.triggerData=[]),this.triggerData.push(e))}}},b=d,p=(r("611e"),Object(u["a"])(b,i,n,!1,null,null,null));e["default"]=p.exports},c879:function(t,e,r){"use strict";r.d(e,"h",(function(){return n})),r.d(e,"k",(function(){return a})),r.d(e,"b",(function(){return o})),r.d(e,"e",(function(){return l})),r.d(e,"m",(function(){return s})),r.d(e,"i",(function(){return g})),r.d(e,"c",(function(){return u})),r.d(e,"l",(function(){return c})),r.d(e,"f",(function(){return m})),r.d(e,"g",(function(){return d})),r.d(e,"d",(function(){return b})),r.d(e,"a",(function(){return p})),r.d(e,"j",(function(){return f}));var i=r("b775");function n(t){return Object(i["a"])({url:"/quartz/job",method:"get",params:t})}function a(t){return Object(i["a"])({url:"/quartz/job",method:"post",params:t})}function o(t){return Object(i["a"])({url:"/quartz/job/status",method:"post",params:t})}function l(t){return Object(i["a"])({url:"/quartz/job/delete",method:"post",params:t})}function s(t){return Object(i["a"])({url:"/quartz/job/trigger",method:"post",params:t})}function g(t){return Object(i["a"])({url:"/quartz/trigger",method:"get",params:t})}function u(t){return Object(i["a"])({url:"/quartz/trigger/status",method:"post",params:t})}function c(t){return Object(i["a"])({url:"/quartz/trigger",method:"post",params:t})}function m(t){return Object(i["a"])({url:"/quartz/trigger/delete",method:"post",params:t})}function d(t){return Object(i["a"])({url:"/quartz/group",method:"get",params:t})}function b(t){return Object(i["a"])({url:"/quartz/group",method:"delete",params:t})}function p(t){return Object(i["a"])({url:"/quartz/group",method:"post",params:t})}function f(t){return Object(i["a"])({url:"/quartz/log",method:"get",params:t})}},e697:function(t,e,r){"use strict";var i=r("e46b"),n=r("013f")(5),a="find",o=!0;a in[]&&Array(1)[a]((function(){o=!1})),i(i.P+i.F*o,"Array",{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r("0e8b")(a)}}]);